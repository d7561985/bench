test:
  pre:
    - go get github.com/mattn/goveralls
    - go get github.com/modocache/gover
  override:
    - go test -v -cover -race -coverprofile=bench.coverprofile
    - go test -v -cover -race -coverprofile=errors.coverprofile ./errors
    - go test -v -cover -race -coverprofile=results.coverprofile ./results
    - go test -v -cover -race -coverprofile=semaphore.coverprofile ./semaphore
  post:
    - gover
    - goveralls -coverprofile=gover.coverprofile -service=circle-ci -repotoken=$COVERALLS_TOKEN
